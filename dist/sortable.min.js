!function(e,t,n){"use strict";function o(o,s,l){function c(){return s.children().length}function d(e){q=t.isString(z.dropzone)?t.element(z.dropzone):t.element("<"+e.prop("localName")+">"),q.addClass("drop-zone"),z.sameSize&&q.css({height:e.prop("clientHeight")+"px",width:e.prop("clientWidth")+"px"}),e.after(q)}function u(t,n){for(var o=0;o<n.length;o++){var r=n.eq(o),a=r.data("sortable.computedStyle");r.css({height:a.height,width:a.width})}for(var i=t[0],s={left:i.offsetLeft,top:i.offsetTop},l=i.offsetParent;l&&"static"===e.getComputedStyle(l).position;)s.left+=l.offsetLeft,s.top+=l.offsetTop,l=l.offsetParent;var c=t.data("sortable.computedStyle");t.addClass("dragging").css({height:c.height,left:s.left-c.marginLeft.slice(0,-2)+"px",pointerEvents:"none",position:"absolute",top:s.top-c.marginTop.slice(0,-2)+"px",width:c.width,zIndex:100})}function p(e){for(var t=s.children(),n=document.elementFromPoint(e.x,e.y),o=0;o<t.length;o++)if(t[o]===n||t[o].contains(n))return t[o]}function f(e){return Array.prototype.indexOf.call(s.children(),e[0])}function g(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function h(e){e.preventDefault(),e.stopPropagation(),C=t.element(e.currentTarget),L.x=e.pageX,L.y=e.pageY,document.addEventListener(a,m),document.addEventListener(i,v)}function m(e){e.preventDefault();var t={x:e.pageX-L.x,y:e.pageY-L.y};g(t)<z.threshold||(C.hasClass("dragging")||x(C,C.children()),y(e,C,t))}function v(e){document.removeEventListener(a,m),document.removeEventListener(i,v),C.hasClass("dragging")&&b(e,C,C.children())}function b(e,n,o){var r=n.data("sortable.index"),a=f(q);a>r&&a--,E(n.removeClass("dragging"));for(var i=0;i<o.length;i++)E(o.eq(i));t.isArray($.sequence)?(q.remove(),l.$apply(function(){$.sequence.splice(a,0,$.sequence.splice(r,1)[0])})):q.replaceWith(n),t.isFunction($.dragEnd)&&$.dragEnd(n,a,r,$.sequence)}function y(e,n,o){n.css("transform","translate("+o.x+"px, "+o.y+"px)");var r={x:e.pageX,y:e.pageY},a=p(r);a&&a!==q[0]&&w(r,a),t.isFunction($.dragMove)&&$.dragMove(n)}function x(e,n){S(e);for(var o=0;o<n.length;o++)S(n.eq(o));u(e,n),d(e.data("sortable.index",f(e))),t.isFunction($.dragStart)&&$.dragStart(e)}function S(t){t.data("sortable.style",t.attr("style")||""),t.data("sortable.computedStyle")||t.data("sortable.computedStyle",e.getComputedStyle(t[0]))}function E(e){e.attr("style",e.data("sortable.style"))}function w(e,t){var n=e.y-t.getBoundingClientRect().top,o=t.clientHeight>>1;n>o?t.nextElementSibling!==q[0]&&s[0].insertBefore(q[0],t.nextElementSibling):t.previousElementSibling!==q[0]&&s[0].insertBefore(q[0],t)}var q,C,$=this,z={dropzone:n,sameSize:!0,threshold:2},L={};$.options&&t.extend(z,$.options),""===o.sortable&&($.sortable=!0),l.$watch(c,function(e){if(e){var t=s.children();$.sortable&&t.on(r,h)}}),l.$watch("$sortable.sortable",function(e){var t=s.children();e?t.on(r,h):t.off(r,h)})}var r="ontouchstart"in document.documentElement?"touchstart":"mousedown",a="ontouchmove"in document.documentElement?"touchmove":"mousemove",i="ontouchend"in document.documentElement?"touchend":"mouseup";o.$inject=["$attrs","$element","$scope"],t.module("sortable",[]).directive("sortable",function(){return{controller:o,controllerAs:"$sortable",bindToController:{options:"=?",dragEnd:"=?",dragMove:"=?",dragStart:"=?",sequence:"=?ngModel",sortable:"=?"}}})}(window,angular);